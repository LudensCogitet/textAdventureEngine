{"start":{"location":"cell","directives":["north","south","east","west","inventory"]},"rooms":{"anywhere":{"actions":[{"actions":{"inventory":[{"steps":[{"function":"list","params":["player","You have ","."]}]}]},"conditions":{"cell_got_lamp":{"eq":false}}},{"actions":{"inventory":[{"steps":[{"function":"say","params":[{"var":"test_var"}]}]}]}},{"actions":{}}],"description":"[anywhere|anywhere]"},"cell":{"actions":[{"actions":{"look&cell":[{"steps":[{"function":"say","params":["Your cell is barely more than a damp debris littered alcove scooped out of the rock wall of a wide, low passage."]},{"function":"say","params":["[Iron bars|cell_bars] are set into the floor and ceiling of the opening before you to the west. ",{"if":{"conditions":{"cell_opened_bars":{"eq":true}},"then":"A loose bar has been torn out of place, allowing just enough room to squeeze through."}},""]},{"function":"say","params":["The skeletal [remains|cell_skeleton] of an unfortunate former occupant sit against the south wall."]},{"function":"say","params":["",{"if":{"conditions":{"cell_got_lamp":{"eq":false}},"then":"An [oil lamp|oil_lamp] hung from a peg on the passage wall provides a grim and meager radiance."}},""]}]}],"look&debris":[{"steps":[{"function":"say","params":["The floor is strewn with [rocks,|rock] sand, and other debris. It's clear this cell is not intended to be even basically livable."]}]}],"hand&debris":[{"steps":[{"function":"say","params":["You grasp large handfuls of sand and gravel and throw them in the air, hooting like a cave man."]}]}],"look&rock":[{"conditions":{"cell_got_rock":{"eq":false}},"steps":[{"function":"say","params":["One rock in particular catches your eye. Sharp on one end, flat on the other. A fine improvised tool any Neanderthal would be jealous of."]}]}],"hand&rock":[{"conditions":{"cell_got_rock":{"eq":false}},"steps":[{"function":"say","params":["You pick up the rock."]},{"function":"set","params":[["cell_got_rock",true]]},{"function":"take","params":["rock"]}]}],"rock&cell_bars":[{"conditions":{"cell_got_rock":{"eq":true}},"steps":[{"function":"say","params":["Grasping the rock by the flat end, you're able to dig away at the soft stone surrounding the bottom of one of the bars. Several minutes and one sore arm later, you pull the bar out of place."]},{"function":"set","params":[["cell_opened_bars",true]]}]}],"look&slopes":{"route":["test_room","look&test_room"]},"look&passage":[{"steps":[{"function":"say","params":["The path slopes significantly. To the south: down into darkness and toward the sound of the sea. To the north: up, also into darkness, but also into silence."]}]}],"hand&oil_lamp":[{"conditions":{"cell_opened_bars":{"eq":false}},"steps":[{"function":"say","params":["You wish you could take the oil lamp. Sadly you are a prisoner and there are iron bars in the way, remember?"]}]},{"conditions":{"cell_opened_bars":{"eq":true}},"steps":[{"function":"say","params":["You take the oil lamp, reasoning that, in a subterranean tunnel, a grim and meager radiance is better than no radiance at all."]},{"function":"take","params":["oil_lamp"]},{"function":"set","params":[["cell_got_lamp",true]]}]}],"south":[{"conditions":{"cell_opened_bars":{"eq":true}},"steps":[{"function":"travel","params":["test_room"]}]}]}},{"actions":{}}],"description":"[Cell|cell]"},"test_room":{"actions":[{"actions":{"look&test_room":[{"steps":[{"function":"say","params":["This is just a test room"]}]}],"north":[{"steps":[{"function":"travel","params":["cell"]}]}]}},{"actions":{}}],"description":"[Just another room|test_room]"}},"conditions":{"location":"cell","turns":-1,"cell_got_lamp":false,"cell_got_rock":false,"cell_opened_bars":false,"test_var":"Hello, this is a test."},"switches":{},"emitters":[],"things":[{"name":"rock","location":"cell","description":"[a rock|rock]","actions":[]},{"name":"oil_lamp","location":"cell","description":"[a depressingly dim oil lamp|oil_lamp]","actions":[]}]}